# Stable Diffusion Image Manager
It's a simple console tool for manage existing images generated by Stable Diffusion with AUTOMATIC1111.

## Features
* Search and count duplicate images by prompt, steps, sampler, CFG, size, model, but **different seeds**.
* Group duplicate images by prompt, steps, sampler, CFG, size, model, but **different seeds**.
* Remove duplicate images by prompt, steps, sampler, CFG, size, model, but **different seeds**.
* Remove deforum images in folders /outputs/img2img-images/Deforum*.
* Generate html report about existing images.

## Build from source

### Requirements
* Java 17
* Maven 3.8+
* Git

### Build
```mvn install```

### Run
```java -jar target/sd-image-manager-1.0.0-SNAPSHOT.jar```

## Usage & Examples
Supported Windows, Linux and MacOS paths.
* **-path** - path to Stable Diffusion folder
* **-copy** - copy duplicate images to folder /outputs/\*/\*/duplicates
* **-rollback** - rollback copy duplicate images from folder /outputs/\*/\*/duplicates
* **-remove** - remove duplicate images. If -deforum is set, plus remove deforum images
* **-deforum** - remove deforum images
* **-info** - count images. If -deforum is set, plus count deforum images
* **-report** - generate html report. Report will be generated in folder /outputs/report.html
### Search and count duplicate images
```java -jar target/sd-image-manager-1.0.0-SNAPSHOT.jar -path path/stable-diffusion/outputs```
### Group duplicate images
```java -jar target/sd-image-manager-1.0.0-SNAPSHOT.jar -path path/stable-diffusion/outputs -copy```
### Rollback copy duplicate images
```java -jar target/sd-image-manager-1.0.0-SNAPSHOT.jar -path path/stable-diffusion/outputs -rollback```
### Remove duplicate images
```java -jar target/sd-image-manager-1.0.0-SNAPSHOT.jar -path path/stable-diffusion/outputs -remove```
### Remove deforum images
```java -jar target/sd-image-manager-1.0.0-SNAPSHOT.jar -path path/stable-diffusion/outputs -deforum -remove```
### Count Deforum images
```java -jar target/sd-image-manager-1.0.0-SNAPSHOT.jar -path path/stable-diffusion/outputs -deforum -info```
### Generate html report
```java -jar target/sd-image-manager-1.0.0-SNAPSHOT.jar -path path/stable-diffusion/outputs -report```

## Report navigation
* Report supports pagination. You can use arrows or 'A' and 'D' keys for navigation.
* You can use arrows or 'W' and 'S' keys for navigation in group of images.
* You can expand image by click on row or by 'SPACE' key.

## Plans
- [ ] Add simple UI
- [ ] Define and add filters for search duplicate images
- [ ] Portable version
- [ ] Filters and search for report
- [ ] ??? Feel free to add your ideas!

## License
The GNU General Public License v3.0 https://www.gnu.org/copyleft/gpl.html